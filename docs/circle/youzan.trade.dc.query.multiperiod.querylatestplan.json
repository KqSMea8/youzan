{"name":"querylatestplan","ids":[10710],"scenarios":"根据订单号和订单明细id查询最新一期发货计划","1.0.0":{"requestUrls":[{"type":"服务商接入","url":"https://open.youzan.com/api/oauthentry/youzan.trade.dc.query.multiperiod/1.0.0/querylatestplan"},{"type":"商家自有接入","url":"https://open.youzan.com/api/entry/youzan.trade.dc.query.multiperiod/1.0.0/querylatestplan"}],"requestParams":[{"name":"oid","type":"Long","example":"1457473078811951107","defaultValue":"","isRequired":"是","desc":"子订单id","isStruct":true,"structUrl":"/web/apiParamStruct/Long","struct":{"name":"Long","type":"Long","isStruct":true,"desc":"","example":null,"creator":null,"children":[]}},{"name":"tid","type":"String","example":"E20180630095118039300001","defaultValue":"","isRequired":"是","desc":"订单号","isStruct":false,"structUrl":null,"struct":null}],"responseParams":[{"name":"tid","type":"String","isRequired":"否","desc":"订单id","isStruct":false,"structUrl":null,"struct":{"name":"tid","type":"String","isNeed":"true","desc":"订单id","defaultValue":null,"example":"E20180930173624040300001","isStruct":false,"children":null}},{"name":"oid","type":"Number","isRequired":"否","desc":"子订单id","isStruct":false,"structUrl":null,"struct":{"name":"oid","type":"Number","isNeed":"true","desc":"子订单id","defaultValue":null,"example":"1474602924517097475","isStruct":false,"children":null}},{"name":"multiPeriodPlan","type":"MultiPeriodPlanOpenDTO","isRequired":"否","desc":"最新一期多期发货计划","isStruct":true,"structUrl":"/web/meta/MultiPeriodPlanOpenDTO","struct":{"name":"multiPeriodPlan","type":"MultiPeriodPlanOpenDTO","isNeed":"true","desc":"最新一期多期发货计划","defaultValue":null,"example":null,"isStruct":true,"children":[{"name":"tid","type":"String","isNeed":null,"desc":"订单号","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"kdt_id","type":"Number","isNeed":null,"desc":"店铺id","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"oid","type":"Number","isNeed":null,"desc":"子订单id","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"delivery_no","type":"String","isNeed":null,"desc":"货单号","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"issue","type":"Number","isNeed":null,"desc":"当前期数","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"estimated_delivery_time","type":"Date","isNeed":null,"desc":"预计送达时间","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"delivery_state","type":"Number","isNeed":null,"desc":"配送状态","defaultValue":null,"example":null,"isStruct":false,"children":[]}]}},{"name":"multiPeriodDetail","type":"MultiPeriodDetailOpenDTO","isRequired":"否","desc":"多期发货明细","isStruct":true,"structUrl":"/web/meta/MultiPeriodDetailOpenDTO","struct":{"name":"multiPeriodDetail","type":"MultiPeriodDetailOpenDTO","isNeed":"true","desc":"多期发货明细","defaultValue":null,"example":null,"isStruct":true,"children":[{"name":"tid","type":"String","isNeed":null,"desc":"主订单ID","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"kdt_id","type":"Number","isNeed":null,"desc":"店铺ID","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"oid","type":"Number","isNeed":null,"desc":"子订单ID","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"total_issue","type":"Number","isNeed":null,"desc":"总期数","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"dist_time_dim","type":"Number","isNeed":null,"desc":"配送时间维度","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"dist_time_dim_str","type":"String","isNeed":null,"desc":"配送时间维度描述","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"dist_time_mode","type":"Number","isNeed":null,"desc":"配送时间模式","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"dist_time_mode_str","type":"String","isNeed":null,"desc":"配送时间模式描述","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"delivery_time","type":"Date","isNeed":null,"desc":"买家下单时选择的送达时间","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"extend","type":"String","isNeed":null,"desc":"扩展信息","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"max_postpone_sum","type":"Number","isNeed":null,"desc":"最大顺延次数","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"lead_time","type":"LeadTimeDTO","isNeed":null,"desc":"配送提前期","defaultValue":null,"example":null,"isStruct":true,"children":[{"name":"lead_day","type":"Number","isNeed":null,"desc":"提前天数","defaultValue":null,"example":null,"isStruct":false,"children":[]},{"name":"lead_hour","type":"Number","isNeed":null,"desc":"截止几点之前下单","defaultValue":null,"example":null,"isStruct":false,"children":[]}]}]}}],"requestDemos":[{"lang":"java","code":"YZClient client = new DefaultYZClient(new Token(\"token\")); //new Sign(appKey, appSecret)\nYouzanTradeDcQueryMultiperiodQuerylatestplanParams youzanTradeDcQueryMultiperiodQuerylatestplanParams = new YouzanTradeDcQueryMultiperiodQuerylatestplanParams();\n\nyouzanTradeDcQueryMultiperiodQuerylatestplanParams.setTid(\"E20181106154717021600005\");\nyouzanTradeDcQueryMultiperiodQuerylatestplanParams.setOid(1481453940569543563L);\n\nYouzanTradeDcQueryMultiperiodQuerylatestplan youzanTradeDcQueryMultiperiodQuerylatestplan = new YouzanTradeDcQueryMultiperiodQuerylatestplan();\nyouzanTradeDcQueryMultiperiodQuerylatestplan.setAPIParams(youzanTradeDcQueryMultiperiodQuerylatestplanParams);\nYouzanTradeDcQueryMultiperiodQuerylatestplanResult result = client.invoke(youzanTradeDcQueryMultiperiodQuerylatestplan);"},{"lang":"csharp","code":"Auth auth = new Token(\"xxx\"); // Auth auth = new Sign(\"app_id\", \"app_secret\");\n\nYZClient yzClient = new DefaultYZClient(auth);\nDictionary<string, object> dict = new System.Collections.Generic.Dictionary<string, object>();\ndict.Add(\"tid\", \"E20181106154717021600005\");\ndict.Add(\"oid\", 1481453940569543563);\n\n\nvar result = yzClient.Invoke(\"youzan.trade.dc.query.multiperiod.querylatestplan\", \"1.0.0\", \"GET\", dict, null);\nConsole.WriteLine(result);\n"},{"lang":"php","code":"<?php\nrequire_once __DIR__ . '/lib/YZTokenClient.php';\n\n$token = 'fill your token';//请填入商家授权后获取的access_token\n$client = new YZTokenClient($token);\n\n$method = 'youzan.trade.dc.query.multiperiod.querylatestplan'; //要调用的api名称\n$api_version = '1.0.0'; //要调用的api版本号\n\n$my_params = [\n    'tid' => 'E20181106154717021600005',\n    'oid' => '1481453940569543563',\n];\n\n$my_files = [\n];\n\necho '<pre>';\nvar_dump(\n    $client->get($method, $api_version, $my_params, $my_files)\n);\necho '</pre>';\n"},{"lang":"python","code":"token = auth.Token(token='token') #auth.Sign(app_id='app_id', app_secret='app_secret')\n\nclient = YZClient(token)\n\nparams={}\n\nparams['tid']=\"E20181106154717021600005\"\nparams['oid']=1481453940569543563\n\nfiles=[]\n\nprint client.invoke('youzan.trade.dc.query.multiperiod.querylatestplan', '1.0.0', 'GET', params=params, files=files)\n"},{"lang":"nodejs","code":"var YZClient = require('yz-open-sdk-nodejs');\nvar Token = require('./node_modules/yz-open-sdk-nodejs/Token');\n\nvar YZClient = new YZClient(new Token('xxxx')); // var YZClient = new YZClient(new Sign('app_id', 'app_secret'));\n\nparams={};\n\nparams['tid']=\"E20181106154717021600005\";\nparams['oid']=1481453940569543563;\n\n\nvar promise = YZClient.invoke('youzan.trade.dc.query.multiperiod.querylatestplan', '1.0.0', 'GET', params, undefined);\n\npromise.then(function(resp) {\n    console.log('resp: ' + resp.body);\n    var data = JSON.parse(resp.body);\n    console.log(data);\n}, function(err) {\n    console.log('err: ' + err);\n}, function(prog) {\n    console.log('prog: ' + prog);\n});\n"}],"errorCodes":[{"errorCode":"102599996","errorDesc":"参数错误, requestDTO不能为空","solution":"根据提示传入正确的参数"},{"errorCode":"102599996","errorDesc":"参数错误, orderNo不能为空","solution":"传入正确的订单号"}],"responseDemo":"{\"response\":{\"multi_period_detail\":{\"dist_time_mode\":0,\"total_issue\":3,\"dist_time_mode_str\":\"每天送达\",\"lead_time\":{\"lead_day\":1,\"lead_hour\":23},\"dist_time_dim\":0,\"dist_time_dim_str\":\"每日一期\",\"oid\":\"1481453940569543563\",\"tid\":\"E20181106154717021600005\"},\"oid\":\"1481453940569543563\",\"multi_period_plan\":{\"kdt_id\":41378813,\"issue\":3,\"estimated_delivery_time\":1541692800000,\"is_delayed\":0,\"delivery_state\":0,\"oid\":1481453940569543700,\"delivery_no\":\"0\",\"tid\":\"E20181106154717021600005\"},\"tid\":\"E20181106154717021600005\"}}","errorResponseDemo":"{\"error_response\":{\"msg\":\"oid cannot be empty\",\"code\":53001}}"},"version":["1.0.0"],"desc":"查询最新一期的发货记录"}