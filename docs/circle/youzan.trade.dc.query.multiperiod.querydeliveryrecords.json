{
  "name": "querydeliveryrecords",
  "ids": [
    10711
  ],
  "scenarios": "根据订单号查询订单下各个子订单的最新一期的发货记录",
  "1.0.0": {
    "requestUrls": [
      {
        "type": "服务商接入",
        "url": "https://open.youzan.com/api/oauthentry/youzan.trade.dc.query.multiperiod/1.0.0/querydeliveryrecords"
      },
      {
        "type": "商家自有接入",
        "url": "https://open.youzan.com/api/entry/youzan.trade.dc.query.multiperiod/1.0.0/querydeliveryrecords"
      }
    ],
    "requestParams": [
      {
        "name": "tid",
        "type": "String",
        "example": "E20180630095118039300001",
        "defaultValue": "",
        "isRequired": "是",
        "desc": "主订单ID",
        "isStruct": false,
        "structUrl": null,
        "struct": null
      }
    ],
    "responseParams": [
      {
        "name": "deliveryRecords",
        "type": "MultiPeriodDeliveryRecordOpenDTO[]",
        "isRequired": "否",
        "desc": "多期发货记录响应体",
        "isStruct": true,
        "structUrl": "/web/meta/MultiPeriodDeliveryRecordOpenDTO",
        "struct": {
          "name": "deliveryRecords",
          "type": "MultiPeriodDeliveryRecordOpenDTO[]",
          "isNeed": "true",
          "desc": "多期发货记录响应体",
          "defaultValue": null,
          "example": null,
          "isStruct": true,
          "children": [
            {
              "name": "kdt_id",
              "type": "Number",
              "isNeed": null,
              "desc": "店铺id",
              "defaultValue": null,
              "example": null,
              "isStruct": false,
              "children": []
            },
            {
              "name": "tid",
              "type": "String",
              "isNeed": null,
              "desc": "主订单ID",
              "defaultValue": null,
              "example": null,
              "isStruct": false,
              "children": []
            },
            {
              "name": "oid",
              "type": "String",
              "isNeed": null,
              "desc": "子订单ID",
              "defaultValue": null,
              "example": null,
              "isStruct": false,
              "children": []
            },
            {
              "name": "issue",
              "type": "Number",
              "isNeed": null,
              "desc": "期数",
              "defaultValue": null,
              "example": null,
              "isStruct": false,
              "children": []
            },
            {
              "name": "multi_period_dist_info",
              "type": "MultiPeriodDistInfoDTO",
              "isNeed": null,
              "desc": "多期发货记录配送信息",
              "defaultValue": null,
              "example": null,
              "isStruct": true,
              "children": [
                {
                  "name": "dist_order",
                  "type": "DistOrderDTO",
                  "isNeed": null,
                  "desc": "配送单",
                  "defaultValue": null,
                  "example": null,
                  "isStruct": true,
                  "children": [
                    {
                      "name": "orderNo",
                      "type": "String",
                      "isNeed": null,
                      "desc": "主订单ID",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "distId",
                      "type": "String",
                      "isNeed": null,
                      "desc": "配送单id",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "kdtId",
                      "type": "Number",
                      "isNeed": null,
                      "desc": "店铺id",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "deliveryType",
                      "type": "Number",
                      "isNeed": null,
                      "desc": "发货类型",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "deliveryNo",
                      "type": "String",
                      "isNeed": null,
                      "desc": "发货单号",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "deliveryPointId",
                      "type": "Number",
                      "isNeed": null,
                      "desc": "出货点id",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "extend",
                      "type": "String",
                      "isNeed": null,
                      "desc": "扩展字段",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "version",
                      "type": "String",
                      "isNeed": null,
                      "desc": "配送单版本号",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "status",
                      "type": "Number",
                      "isNeed": null,
                      "desc": "配送单状态\n0 未发货\n1 发货中\n2 已发货\n3 已取消",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "distType",
                      "type": "Number",
                      "isNeed": null,
                      "desc": "配送方式\n1 快递\n2 同城送\n3 自提",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": false,
                      "children": []
                    },
                    {
                      "name": "expressInfo",
                      "type": "ExpressInfo",
                      "isNeed": null,
                      "desc": "物流快递信息",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": true,
                      "children": [
                        {
                          "name": "state",
                          "type": "Number",
                          "isNeed": null,
                          "desc": "物流状态 0：在途 1：揽件 2：疑难 3：签收 4：退签 5：派件 6：退回",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "data",
                          "type": "String",
                          "isNeed": null,
                          "desc": "物流信息json",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "expressNo",
                          "type": "String",
                          "isNeed": null,
                          "desc": "物流单号",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "expressId",
                          "type": "Number",
                          "isNeed": null,
                          "desc": "物流公司id",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "expressDetail",
                          "type": "ExpressDetail",
                          "isNeed": null,
                          "desc": "快递发货->物流详情",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": true,
                          "children": [
                            {
                              "name": "expressCompanyName",
                              "type": "String",
                              "isNeed": null,
                              "desc": "物流公司名称",
                              "defaultValue": null,
                              "example": null,
                              "isStruct": false,
                              "children": []
                            },
                            {
                              "name": "expressProgressInfo",
                              "type": "String",
                              "isNeed": null,
                              "desc": "物流进度详情",
                              "defaultValue": null,
                              "example": null,
                              "isStruct": false,
                              "children": []
                            },
                            {
                              "name": "expressStatus",
                              "type": "String",
                              "isNeed": null,
                              "desc": "物流状态 \n0 待发货\n1 已发货\n2 已签收\n6 待取货\n7 已取消\n8 已过期",
                              "defaultValue": null,
                              "example": null,
                              "isStruct": false,
                              "children": []
                            },
                            {
                              "name": "com",
                              "type": "String",
                              "isNeed": null,
                              "desc": "物流公司编码",
                              "defaultValue": null,
                              "example": null,
                              "isStruct": false,
                              "children": []
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "name": "localDeliveryDetail",
                      "type": "LocalDeliveryDetail",
                      "isNeed": null,
                      "desc": "同城送配送信息详情",
                      "defaultValue": null,
                      "example": null,
                      "isStruct": true,
                      "children": [
                        {
                          "name": "deliveryNo",
                          "type": "String",
                          "isNeed": null,
                          "desc": "货单号",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "deductFee",
                          "type": "Number",
                          "isNeed": null,
                          "desc": "违约金",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "distStatus",
                          "type": "String",
                          "isNeed": null,
                          "desc": "同城送状态描述\n  STATUS_NONE(Integer.valueOf(-1), \"初始状态\", false),\n  STATUS_NORMAL(Integer.valueOf(0), \"初始状态\", false),\n  STATUS_ORDERING(Integer.valueOf(1), \"待接单\", false),\n  STATUS_TAKING(Integer.valueOf(2), \"待取货\", false),\n  STATUS_SENDING(Integer.valueOf(3), \"配送中\", false),\n  STATUS_DONE(Integer.valueOf(4), \"已完成\", true),\n  STATUS_CANCEL(Integer.valueOf(5), \"已取消\", true),\n  STATUS_CANCEL_EXCEPTION(Integer.valueOf(6), \"取消异常\", false),\n  STATUS_OVERDUE(Integer.valueOf(7), \"已过期\", true);",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "distStatusCode",
                          "type": "Number",
                          "isNeed": null,
                          "desc": "同城送状态码\n  STATUS_NONE(Integer.valueOf(-1), \"初始状态\", false),\n  STATUS_NORMAL(Integer.valueOf(0), \"初始状态\", false),\n  STATUS_ORDERING(Integer.valueOf(1), \"待接单\", false),\n  STATUS_TAKING(Integer.valueOf(2), \"待取货\", false),\n  STATUS_SENDING(Integer.valueOf(3), \"配送中\", false),\n  STATUS_DONE(Integer.valueOf(4), \"已完成\", true),\n  STATUS_CANCEL(Integer.valueOf(5), \"已取消\", true),\n  STATUS_CANCEL_EXCEPTION(Integer.valueOf(6), \"取消异常\", false),\n  STATUS_OVERDUE(Integer.valueOf(7), \"已过期\", true);",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "distLng",
                          "type": "String",
                          "isNeed": null,
                          "desc": "配送员经度",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "distLat",
                          "type": "String",
                          "isNeed": null,
                          "desc": "配送员纬度",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "tip",
                          "type": "Number",
                          "isNeed": null,
                          "desc": "配送员小费",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "deliveryFee",
                          "type": "Number",
                          "isNeed": null,
                          "desc": "配送费",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "distance",
                          "type": "String",
                          "isNeed": null,
                          "desc": "配送员距离",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "createTime",
                          "type": "String",
                          "isNeed": null,
                          "desc": "发单时间",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "acceptTime",
                          "type": "String",
                          "isNeed": null,
                          "desc": "接单时间",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "fetchTime",
                          "type": "String",
                          "isNeed": null,
                          "desc": "取货时间",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "finishTime",
                          "type": "String",
                          "isNeed": null,
                          "desc": "送达时间",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "cancelTime",
                          "type": "String",
                          "isNeed": null,
                          "desc": "取消时间",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "cancelReason",
                          "type": "String",
                          "isNeed": null,
                          "desc": "取消原因",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        },
                        {
                          "name": "expireTime",
                          "type": "String",
                          "isNeed": null,
                          "desc": "过期时间",
                          "defaultValue": null,
                          "example": null,
                          "isStruct": false,
                          "children": []
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "allow_modify_express",
                  "type": "Boolean",
                  "isNeed": null,
                  "desc": "是否允许修改物流",
                  "defaultValue": null,
                  "example": null,
                  "isStruct": false,
                  "children": []
                }
              ]
            }
          ]
        }
      }
    ],
    "requestDemos": [
      {
        "lang": "java",
        "code": "YZClient client = new DefaultYZClient(new Token(\"token\")); //new Sign(appKey, appSecret)\nYouzanTradeDcQueryMultiperiodQuerydeliveryrecordsParams youzanTradeDcQueryMultiperiodQuerydeliveryrecordsParams = new YouzanTradeDcQueryMultiperiodQuerydeliveryrecordsParams();\n\nyouzanTradeDcQueryMultiperiodQuerydeliveryrecordsParams.setTid(\"E20181106154717021600005\");\n\nYouzanTradeDcQueryMultiperiodQuerydeliveryrecords youzanTradeDcQueryMultiperiodQuerydeliveryrecords = new YouzanTradeDcQueryMultiperiodQuerydeliveryrecords();\nyouzanTradeDcQueryMultiperiodQuerydeliveryrecords.setAPIParams(youzanTradeDcQueryMultiperiodQuerydeliveryrecordsParams);\nYouzanTradeDcQueryMultiperiodQuerydeliveryrecordsResult result = client.invoke(youzanTradeDcQueryMultiperiodQuerydeliveryrecords);"
      },
      {
        "lang": "csharp",
        "code": "Auth auth = new Token(\"xxx\"); // Auth auth = new Sign(\"app_id\", \"app_secret\");\n\nYZClient yzClient = new DefaultYZClient(auth);\nDictionary<string, object> dict = new System.Collections.Generic.Dictionary<string, object>();\ndict.Add(\"tid\", \"E20181106154717021600005\");\n\n\nvar result = yzClient.Invoke(\"youzan.trade.dc.query.multiperiod.querydeliveryrecords\", \"1.0.0\", \"GET\", dict, null);\nConsole.WriteLine(result);\n"
      },
      {
        "lang": "php",
        "code": "<?php\nrequire_once __DIR__ . '/lib/YZTokenClient.php';\n\n$token = 'fill your token';//请填入商家授权后获取的access_token\n$client = new YZTokenClient($token);\n\n$method = 'youzan.trade.dc.query.multiperiod.querydeliveryrecords'; //要调用的api名称\n$api_version = '1.0.0'; //要调用的api版本号\n\n$my_params = [\n    'tid' => 'E20181106154717021600005',\n];\n\n$my_files = [\n];\n\necho '<pre>';\nvar_dump(\n    $client->get($method, $api_version, $my_params, $my_files)\n);\necho '</pre>';\n"
      },
      {
        "lang": "python",
        "code": "token = auth.Token(token='token') #auth.Sign(app_id='app_id', app_secret='app_secret')\n\nclient = YZClient(token)\n\nparams={}\n\nparams['tid']=\"E20181106154717021600005\"\n\nfiles=[]\n\nprint client.invoke('youzan.trade.dc.query.multiperiod.querydeliveryrecords', '1.0.0', 'GET', params=params, files=files)\n"
      },
      {
        "lang": "nodejs",
        "code": "var YZClient = require('yz-open-sdk-nodejs');\nvar Token = require('./node_modules/yz-open-sdk-nodejs/Token');\n\nvar YZClient = new YZClient(new Token('xxxx')); // var YZClient = new YZClient(new Sign('app_id', 'app_secret'));\n\nparams={};\n\nparams['tid']=\"E20181106154717021600005\";\n\n\nvar promise = YZClient.invoke('youzan.trade.dc.query.multiperiod.querydeliveryrecords', '1.0.0', 'GET', params, undefined);\n\npromise.then(function(resp) {\n    console.log('resp: ' + resp.body);\n    var data = JSON.parse(resp.body);\n    console.log(data);\n}, function(err) {\n    console.log('err: ' + err);\n}, function(prog) {\n    console.log('prog: ' + prog);\n});\n"
      }
    ],
    "errorCodes": [
      {
        "errorCode": "102599996",
        "errorDesc": "参数错误, 订单号不能为空.",
        "solution": null
      }
    ],
    "responseDemo": "{\"response\":[{\"kdt_id\":19107592,\"issue\":1,\"multi_period_dist_info\":[{\"dist_order\":{\"create_time\":1539615674000,\"express_info\":{\"express_id\":2,\"express_detail\":{\"express_company_name\":\"圆通速递\"},\"express_no\":\"3377532103021\"},\"delivery_no\":\"201810101641360000050859\",\"version\":1539615674242,\"extend\":\"\",\"dist_id\":\"201810152301140000010859\",\"kdt_id\":19107592,\"update_time\":1539615674000,\"delivery_point_id\":19107592,\"dist_type\":1,\"delivery_type\":12,\"dist_order_item_opens\":[{\"dist_id\":\"201810152301140000010859\",\"kdt_id\":19107592,\"create_time\":1539615674000,\"num\":1,\"weight\":1,\"oid\":\"1476451289701817185\",\"delivery_no\":\"201810101641360000050859\",\"tid\":\"E20181010164136085900005\"}],\"status\":2}}],\"oid\":\"1476451289701817185\",\"tid\":\"E20181010164136085900005\"}]}",
    "errorResponseDemo": "{\"error_response\":{\"msg\":\"参数错误, 订单号不能为空.\",\"code\":102599996}}"
  },
  "version": [
    "1.0.0"
  ],
  "desc": "查询周期购信息的发货记录"
}
